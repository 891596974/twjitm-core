package com.twjitm.rpc;import com.twjitm.TestSpring;import com.twjitm.core.common.enums.NettyGameTypeEnum;import com.twjitm.core.common.service.rpc.client.NettyRpcContextHolder;import com.twjitm.core.common.service.rpc.client.NettyRpcContextHolderObject;import com.twjitm.core.common.service.rpc.service.NettyRpcProxyService;import com.twjitm.core.service.rpc.service.IHelloWorld;import com.twjitm.core.spring.SpringServiceManager;/** * @author EGLS0807 - [Created on 2018-08-20 15:16] * @company http://www.g2us.com/ * @jdk java version "1.8.0_77" * * 同步阻塞调用 */public class HelloWorldServiceTest {    private NettyRpcProxyService nettyRpcProxyService;    public static void main(String[] args) {        TestSpring.initSpring();        HelloWorldServiceTest helloServiceTest = new HelloWorldServiceTest();        helloServiceTest.init();        helloServiceTest.helloTest1();    }    private void init() {        nettyRpcProxyService=SpringServiceManager.getSpringLoadService().getNettyRpcProxyService();    }    private void helloTest1() {        IHelloWorld helloWorld = nettyRpcProxyService.createProxy(IHelloWorld.class);        int serverId=9001;        NettyRpcContextHolderObject rpcContextHolderObject =                new NettyRpcContextHolderObject(NettyGameTypeEnum.WORLD, serverId);        NettyRpcContextHolder.setContextHolder(rpcContextHolderObject);        String result = helloWorld.getHelloWorld(5);        System.out.println(result);    }    public void setTear(){        if (nettyRpcProxyService != null) {            try {                nettyRpcProxyService.shutdown();            } catch (Exception e) {                e.printStackTrace();            }        }    }}